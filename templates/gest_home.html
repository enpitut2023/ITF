<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ITF. ～Informative Textbook Fleamarket～</title>
  <link rel="stylesheet" href="/static/css/reset.css">
  <link rel="stylesheet" href="/static/css/home.css">
  <link rel="stylesheet" href="/static/css/style.css">
  {% block extra_css %}{% endblock %}
</head>
<body>
  <header>
  <div class="header">
    <a href="/gest_home" class="title-container">
      <h1 class="title">ITF.</h1>
      <p class="title-sub">Informative Textbook Fleamarket</p>
    </a>
    <!-- PC用メニュー -->
    <ul class="menu is-pc">
      <li><a href="/None/register">購入情報</a></li>
      <li><a href="/None/register">出品</a></li>
      <!-- <li><a href="/{{ username }}/seach_book">出品</a></li> -->
      <li><a href="/None/register">Mypage</a></li>
    </ul>
  </div>
  
  
  <!-- SP用メニュー -->
  <div id="navArea" class="is-sp">
    <nav>
      <div class="inner">
        <ul class="menu">
          <li><a href="/None/register">購入情報</a></li>
          <li><a href="/None/register">出品</a></li>
          <li><a href="/None/register">Mypage</a></li>
        </ul>
    </nav>
  
    <div class="toggle_btn">
      <span></span>
      <span></span>
      <span></span>
    </div>
  
    <!-- SP用メニュー -->
    <div id="navArea" class="is-sp">
      <nav>
        <div class="inner">
          <ul class="menu">
            <li><a href="/None/register">購入情報</a></li>
            <li><a href="/None/register">出品</a></li>
            <li><a href="/None/register">Mypage</a></li>
          </ul>
      </nav>
      <div class="toggle_btn">
        <span></span>
        <span></span>
        <span></span>
      </div>
      <div id="mask"></div>
    </div>
  </header>
<h2 class="search-heading">教科書を検索</h2>
<form action="/gest_home" method="POST" id="search">
  <input type="text" name="keyword" placeholder="教科書名を入力してください" id="search_box">
  <input type="submit" value="検索" id="search_button">
</form>

<div class="container">
  <section class="product">
    {% for result in results %}
    {% if result[0].to_dict().get("状態") != "sold" %}
    <div class="product-item">
      <div class="product-detail">
        {% if result[0].to_dict()['画像'] != "None" %}
        <img src="{{ result[0].to_dict()['画像'] }}" class="product-img" alt="">
        {% else %}
        <img src="/static/img/book.png" class="product-img" alt="">
        {% endif %}
        <div class="product-data">
          <h1 class="product-name">{{ result[0].to_dict()["教科書名"] }}</h1>
          <p class="product-author">
            <a href="#" class="exuser" onclick="submitForm('{{ result[1] }}')">
              出品者：{{ result[0].to_dict()["出品者"] }}
            </a>
          </p>
          
          <p class="product-author">値段：{{ result[0].to_dict()["値段"] }}円</p>
          {% if result[0].to_dict()["受け取り場所"] != [] %}
          {% for i in result[0].to_dict()["受け取り場所"] %}
          <p class="product-author">{{i}}</p>
          {% endfor %}
          {% endif %}

        </div><!-- /.product-data -->
      </div><!-- /.product-detail -->
      <div class="tab-product__link product-btn">
        <a class="button-arrow-right" href="/None/register">欲しい！</a>
      </div>
    </div>

    {% endif %}
    {% endfor %}
  </section>
</div>
<!-- 隠しフォームを作成 -->
<form id="exuserForm" action="/gest/userpage" method="POST">
  <input type="hidden" name="exuser_id" id="exuserIdInput">
</form>


<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
<script src="/static/javascript/script.js"></script>
<script>
  function submitForm(exuserId) {
    // フォームの入力要素に出品者のIDを設定
    document.getElementById('exuserIdInput').value = exuserId;
    
    // フォームを送信
    document.getElementById('exuserForm').submit();
  }
</script>
</body>
</html>